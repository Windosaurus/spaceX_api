{"ast":null,"code":"import _regeneratorRuntime from\"/Users/windsorhuang/Desktop/soma-frontend-code-test-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/windsorhuang/Desktop/soma-frontend-code-test-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";// Imports\nimport React,{useEffect}from'react';import{Badge,Container,Row}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{VerticalTimeline,VerticalTimelineElement}from'react-vertical-timeline-component';import ErrorCard from'../ErrorCard';import SearchBar from'../SearchBar';// Redux Imports\nimport{fetchAllHistory}from'../../redux/actions/historyActions';// Timeline Imports\nimport'react-vertical-timeline-component/style.min.css';import Moment from'moment';function HistoryData(){var dispatch=useDispatch();var state=useSelector(function(state){return state.history;});useEffect(function(){function getHistory(){return _getHistory.apply(this,arguments);}function _getHistory(){_getHistory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(fetchAllHistory());case 1:case\"end\":return _context.stop();}}},_callee);}));return _getHistory.apply(this,arguments);}getHistory().then(function(r){return console.log('History Data',r);});},[]);function loadHistory(historyList){var searchFilter;var eventCount=0;var toDisplayMatchedEvents=false;if(state.historyFilter!==undefined&&state.historyFilter!==''){searchFilter=state.historyFilter.toLowerCase();toDisplayMatchedEvents=true;}else{searchFilter='';}var filteredHistory=[];for(var i=0;i<historyList.length;i++){var historyTitle=historyList[i].title.toLowerCase();var historyDate=Moment(historyList[i].date).format('L');var historyDetails=historyList[i].details.toLowerCase();if(historyTitle.includes(searchFilter)||historyDate.includes(searchFilter)||historyDetails.includes(searchFilter)){filteredHistory.push(historyList[i]);eventCount+=1;}}console.log('Filtered history',filteredHistory);return/*#__PURE__*/React.createElement(Container,null,toDisplayMatchedEvents===false?/*#__PURE__*/React.createElement(\"h5\",null,\"All events\",' ',/*#__PURE__*/React.createElement(Badge,{variant:\"secondary\"},eventCount)):/*#__PURE__*/React.createElement(\"h5\",null,\"Matched Results\",' ',/*#__PURE__*/React.createElement(Badge,{variant:\"secondary\"},eventCount)),/*#__PURE__*/React.createElement(VerticalTimeline,null,filteredHistory.map(function(event){return/*#__PURE__*/React.createElement(VerticalTimelineElement,{className:\"vertical-timeline-element--work\",contentStyle:{background:'rgb(107,73,169)',color:'#fff'},contentArrowStyle:{borderRight:'7px solid  rgb(107,73,169)'},date:Moment(event.date).format('L'),iconStyle:{background:'rgb(107,73,169)',color:'rgb(223,223,223)'}},/*#__PURE__*/React.createElement(\"h3\",{style:{fontSize:'1.3em',fontWeight:'bold'}},event.title),/*#__PURE__*/React.createElement(\"p\",null,event.details),/*#__PURE__*/React.createElement(\"br\",null),event.link===undefined||event.link===''?/*#__PURE__*/React.createElement(\"br\",null):/*#__PURE__*/React.createElement(\"a\",{style:{color:'white',fontStyle:'italic'},target:\"_blank\",href:event.link},\"Click here to read more!\"),/*#__PURE__*/React.createElement(\"br\",null));})));}return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(SearchBar,{pageType:\"history\"})),/*#__PURE__*/React.createElement(\"br\",null),state.historyList===[]||state.historyList===undefined?/*#__PURE__*/React.createElement(ErrorCard,null):loadHistory(state.historyList));}export default HistoryData;","map":{"version":3,"sources":["/Users/windsorhuang/Desktop/soma-frontend-code-test-master/src/components/historyComponents/HistoryData.jsx"],"names":["React","useEffect","Badge","Container","Row","useDispatch","useSelector","VerticalTimeline","VerticalTimelineElement","ErrorCard","SearchBar","fetchAllHistory","Moment","HistoryData","dispatch","state","history","getHistory","then","r","console","log","loadHistory","historyList","searchFilter","eventCount","toDisplayMatchedEvents","historyFilter","undefined","toLowerCase","filteredHistory","i","length","historyTitle","title","historyDate","date","format","historyDetails","details","includes","push","map","event","background","color","borderRight","fontSize","fontWeight","link","fontStyle"],"mappings":"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","sourcesContent":["// Imports\nimport React, { useEffect } from 'react';\nimport { Badge, Container, Row } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { VerticalTimeline, VerticalTimelineElement } from 'react-vertical-timeline-component';\nimport ErrorCard from '../ErrorCard';\nimport SearchBar from '../SearchBar';\n// Redux Imports\nimport { fetchAllHistory } from '../../redux/actions/historyActions';\n// Timeline Imports\nimport 'react-vertical-timeline-component/style.min.css';\nimport Moment from 'moment';\n\n\nfunction HistoryData() {\n  const dispatch = useDispatch();\n  const state = useSelector((state) => state.history);\n\n  useEffect(() => {\n    async function getHistory() {\n      dispatch(fetchAllHistory());\n    }\n\n    getHistory().then((r) => console.log('History Data', r));\n  }, []);\n\n  function loadHistory(historyList) {\n    let searchFilter;\n    let eventCount = 0;\n    let toDisplayMatchedEvents = false;\n\n    if (state.historyFilter !== undefined && state.historyFilter !== '') {\n      searchFilter = state.historyFilter.toLowerCase();\n      toDisplayMatchedEvents = true;\n    } else {\n      searchFilter = '';\n    }\n\n    const filteredHistory = [];\n    for (let i = 0; i < historyList.length; i++) {\n      const historyTitle = historyList[i].title.toLowerCase();\n      const historyDate = Moment(historyList[i].date).format('L');\n      const historyDetails = historyList[i].details.toLowerCase();\n\n      if (historyTitle.includes(searchFilter) || historyDate.includes(searchFilter) || historyDetails.includes(searchFilter)) {\n        filteredHistory.push(historyList[i]);\n        eventCount += 1;\n      }\n    }\n\n    console.log('Filtered history', filteredHistory);\n\n    return (\n      <Container>\n        {toDisplayMatchedEvents === false\n          ? (\n            <h5>\n              All events\n              {' '}\n              <Badge variant=\"secondary\">{eventCount}</Badge>\n            </h5>\n          )\n          : (\n            <h5>\n              Matched Results\n              {' '}\n              <Badge variant=\"secondary\">{eventCount}</Badge>\n            </h5>\n          )}\n        <VerticalTimeline>\n          {filteredHistory.map((event) => (\n            <VerticalTimelineElement\n              className=\"vertical-timeline-element--work\"\n              contentStyle={{ background: 'rgb(107,73,169)', color: '#fff' }}\n              contentArrowStyle={{ borderRight: '7px solid  rgb(107,73,169)' }}\n              date={Moment(event.date).format('L')}\n              iconStyle={{ background: 'rgb(107,73,169)', color: 'rgb(223,223,223)' }}\n            >\n              <h3 style={{ fontSize: '1.3em', fontWeight: 'bold' }}>{event.title}</h3>\n              <p>{event.details}</p>\n              <br />\n              {(event.link === undefined || event.link === '') ? <br />\n                : (\n                  <a style={{ color: 'white', fontStyle: 'italic' }} target=\"_blank\" href={event.link}>\n                    Click\n                    here to read more!\n                  </a>\n                )}\n              <br />\n            </VerticalTimelineElement>\n          ))}\n        </VerticalTimeline>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <br />\n      <Row>\n        <SearchBar pageType=\"history\" />\n      </Row>\n      <br />\n      {(state.historyList === [] || state.historyList === undefined)\n        ? <ErrorCard /> : loadHistory(state.historyList)}\n    </Container>\n  );\n}\n\nexport default HistoryData;\n"]},"metadata":{},"sourceType":"module"}