{"ast":null,"code":"var _jsxFileName = \"/Users/windsorhuang/Desktop/soma-frontend-code-test-master/src/components/historyComponents/HistoryData.jsx\";\n// Imports\nimport React, { useEffect } from 'react';\nimport { Badge, Container, Row } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { VerticalTimeline, VerticalTimelineElement } from 'react-vertical-timeline-component';\nimport ErrorCard from '../ErrorCard';\nimport SearchBar from '../SearchBar'; // Redux Imports\n\nimport { fetchAllHistory } from '../../redux/actions/historyActions'; // Timeline Imports\n\nimport 'react-vertical-timeline-component/style.min.css';\nimport Moment from 'moment';\n\nfunction HistoryData() {\n  const dispatch = useDispatch();\n  const state = useSelector(state => state.history);\n  useEffect(() => {\n    async function getHistory() {\n      dispatch(fetchAllHistory());\n    }\n\n    getHistory().then(r => console.log('History Data', r));\n  }, []);\n\n  function loadHistory(historyList) {\n    let searchFilter;\n    let eventCount = 0;\n    let toDisplayMatchedEvents = false;\n\n    if (state.historyFilter !== undefined && state.historyFilter !== '') {\n      searchFilter = state.historyFilter.toLowerCase();\n      toDisplayMatchedEvents = true;\n    } else {\n      searchFilter = '';\n    }\n\n    const filteredHistory = [];\n\n    for (let i = 0; i < historyList.length; i++) {\n      const historyTitle = historyList[i].title.toLowerCase();\n      const historyDate = Moment(historyList[i].date).format('L');\n      const historyDetails = historyList[i].details.toLowerCase();\n\n      if (historyTitle.includes(searchFilter) || historyDate.includes(searchFilter) || historyDetails.includes(searchFilter)) {\n        filteredHistory.push(historyList[i]);\n        eventCount += 1;\n      }\n    }\n\n    console.log('Filtered history', filteredHistory);\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, toDisplayMatchedEvents === false ? /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, \"All events\", ' ', /*#__PURE__*/React.createElement(Badge, {\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    }, eventCount)) : /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, \"Matched Results\", ' ', /*#__PURE__*/React.createElement(Badge, {\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 15\n      }\n    }, eventCount)), /*#__PURE__*/React.createElement(VerticalTimeline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, filteredHistory.map(event => /*#__PURE__*/React.createElement(VerticalTimelineElement, {\n      className: \"vertical-timeline-element--work\",\n      contentStyle: {\n        background: 'rgb(107,73,169)',\n        color: '#fff'\n      },\n      contentArrowStyle: {\n        borderRight: '7px solid  rgb(107,73,169)'\n      },\n      date: Moment(event.date).format('L'),\n      iconStyle: {\n        background: 'rgb(107,73,169)',\n        color: 'rgb(223,223,223)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        fontSize: '1.3em',\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }, event.title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, event.details), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 15\n      }\n    }), event.link === undefined || event.link === '' ? /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 66\n      }\n    }) : /*#__PURE__*/React.createElement(\"a\", {\n      style: {\n        color: 'white',\n        fontStyle: 'italic'\n      },\n      target: \"_blank\",\n      href: event.link,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }, \"Click here to read more!\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SearchBar, {\n    pageType: \"history\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), state.historyList === [] || state.historyList === undefined ? /*#__PURE__*/React.createElement(ErrorCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }) : loadHistory(state.historyList));\n}\n\nexport default HistoryData;","map":{"version":3,"sources":["/Users/windsorhuang/Desktop/soma-frontend-code-test-master/src/components/historyComponents/HistoryData.jsx"],"names":["React","useEffect","Badge","Container","Row","useDispatch","useSelector","VerticalTimeline","VerticalTimelineElement","ErrorCard","SearchBar","fetchAllHistory","Moment","HistoryData","dispatch","state","history","getHistory","then","r","console","log","loadHistory","historyList","searchFilter","eventCount","toDisplayMatchedEvents","historyFilter","undefined","toLowerCase","filteredHistory","i","length","historyTitle","title","historyDate","date","format","historyDetails","details","includes","push","map","event","background","color","borderRight","fontSize","fontWeight","link","fontStyle"],"mappings":"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","sourcesContent":["// Imports\nimport React, { useEffect } from 'react';\nimport { Badge, Container, Row } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { VerticalTimeline, VerticalTimelineElement } from 'react-vertical-timeline-component';\nimport ErrorCard from '../ErrorCard';\nimport SearchBar from '../SearchBar';\n// Redux Imports\nimport { fetchAllHistory } from '../../redux/actions/historyActions';\n// Timeline Imports\nimport 'react-vertical-timeline-component/style.min.css';\nimport Moment from 'moment';\n\n\nfunction HistoryData() {\n  const dispatch = useDispatch();\n  const state = useSelector((state) => state.history);\n\n  useEffect(() => {\n    async function getHistory() {\n      dispatch(fetchAllHistory());\n    }\n\n    getHistory().then((r) => console.log('History Data', r));\n  }, []);\n\n  function loadHistory(historyList) {\n    let searchFilter;\n    let eventCount = 0;\n    let toDisplayMatchedEvents = false;\n\n    if (state.historyFilter !== undefined && state.historyFilter !== '') {\n      searchFilter = state.historyFilter.toLowerCase();\n      toDisplayMatchedEvents = true;\n    } else {\n      searchFilter = '';\n    }\n\n    const filteredHistory = [];\n    for (let i = 0; i < historyList.length; i++) {\n      const historyTitle = historyList[i].title.toLowerCase();\n      const historyDate = Moment(historyList[i].date).format('L');\n      const historyDetails = historyList[i].details.toLowerCase();\n\n      if (historyTitle.includes(searchFilter) || historyDate.includes(searchFilter) || historyDetails.includes(searchFilter)) {\n        filteredHistory.push(historyList[i]);\n        eventCount += 1;\n      }\n    }\n\n    console.log('Filtered history', filteredHistory);\n\n    return (\n      <Container>\n        {toDisplayMatchedEvents === false\n          ? (\n            <h5>\n              All events\n              {' '}\n              <Badge variant=\"secondary\">{eventCount}</Badge>\n            </h5>\n          )\n          : (\n            <h5>\n              Matched Results\n              {' '}\n              <Badge variant=\"secondary\">{eventCount}</Badge>\n            </h5>\n          )}\n        <VerticalTimeline>\n          {filteredHistory.map((event) => (\n            <VerticalTimelineElement\n              className=\"vertical-timeline-element--work\"\n              contentStyle={{ background: 'rgb(107,73,169)', color: '#fff' }}\n              contentArrowStyle={{ borderRight: '7px solid  rgb(107,73,169)' }}\n              date={Moment(event.date).format('L')}\n              iconStyle={{ background: 'rgb(107,73,169)', color: 'rgb(223,223,223)' }}\n            >\n              <h3 style={{ fontSize: '1.3em', fontWeight: 'bold' }}>{event.title}</h3>\n              <p>{event.details}</p>\n              <br />\n              {(event.link === undefined || event.link === '') ? <br />\n                : (\n                  <a style={{ color: 'white', fontStyle: 'italic' }} target=\"_blank\" href={event.link}>\n                    Click\n                    here to read more!\n                  </a>\n                )}\n              <br />\n            </VerticalTimelineElement>\n          ))}\n        </VerticalTimeline>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <br />\n      <Row>\n        <SearchBar pageType=\"history\" />\n      </Row>\n      <br />\n      {(state.historyList === [] || state.historyList === undefined)\n        ? <ErrorCard /> : loadHistory(state.historyList)}\n    </Container>\n  );\n}\n\nexport default HistoryData;\n"]},"metadata":{},"sourceType":"module"}